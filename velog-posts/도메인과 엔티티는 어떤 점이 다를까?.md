<p>이때까지 스프링으로 개발해오면서 도메인의 뜻을 정확히 알지 못하고 개발했습니다. 그냥 대충 엔티티랑 비슷한 거... 어떠한 서비스의 주제... 라고 생각해왔습니다. 도메인형 패키지 구조와 계층형 패키지 구조를 알아보면서도 대충 알아들었습니다.
이따금씩 서치해본 기억은 있지만, 인터넷 주소를 뜻하는 도메인의 정의만 계속 결과로 나와서 알아보는 것을 미뤘습니다.
바보 같습니다.</p>
<p>이번에 우테코 로또 미션을 한 번 더 해봤는데, 모델 객체들을 어디다가 두어야 할까? 고민하다가 늘 하던 대로 entity 패키지에 넣었습니다. 
리뷰에서 지적해주신 점이기도 했고(감사할 따름입니다), 다른 분들이 작성하신 코드에서 도메인이 등장하는 것을 보았습니다. 그 순간, 도메인의 뜻을 잘 인지하지 못했던 것을 떠올렸습니다!
이제서야 찾아보았습니다...</p>
<p>일단 자주 혼재되어 사용되기 때문에 구분이 어렵다는 것을 알았습니다. 그러나. 정확히. 제가 이해한 내용을 바탕으로. 정리해보겠습니다.
<img alt="" src="https://velog.velcdn.com/images/ahyeungii/post/c325acd2-bb6b-430e-b469-06a378b9490d/image.png" />
분리했을 때를 그림으로 표현하자면 요런 느낌인 듯</p>
<h3 id="도메인">도메인</h3>
<p><strong>비즈니스 문제 영역</strong>을 뜻합니다.
유스케이스는 도메인의 동적 측면을 나타내고, 도메인 자체는 정적 측면을 나타냅니다.
소프트웨어 개발 대상 영역이라고 할 수도 있습니다. 
도메인은 비즈니스 로직과 도메인 모델을 포함합니다. 도메인 모델은 도메인을 모든 사람이 동일한 관점에서 이해할 수 있고 공유할 수 있도록 단순화시킨 것입니다. 도메인을 이해하는 것은 도메인 모델을 잘 설계하는 데 있어서 필수적입니다.</p>
<h3 id="엔티티">엔티티</h3>
<p>도메인 내에서 고유 식별자를 가진 개별적인 객체 또는 개념을 뜻합니다. 엔티티는 보통 구체화라고 표현하고, DB에서는 테이블로 표현합니다.
엔티티는 <strong>도메인의 핵심 데이터를 캡슐화하고 처리하기 위해서 사용</strong>됩니다.
도메인 모델 내에서 상태를 가지며 변할 수 있는 객체를 말합니다.</p>
<h3 id="도메인과-엔티티의-차이점">도메인과 엔티티의 차이점?</h3>
<p>도메인은 비즈니스 영역을 추상적으로 나타내는 <strong>개념</strong>이고, 엔티티는 도메인 내에서 <strong>실제 개별 객체나 개념</strong>을 나타냅니다.
로또 미션으로 따져보자면, 
도메인의 범위에는 금액 처리, 로또 생성, 당첨번호 매칭 등이 있을 것이고
엔티티의 범위에는 로또, 당첨번호, 당첨결과 등이 있을 것입니다.
엔티티는 실체화된 도메인이므로 DB와의 통신 객체로 사용하고, 도메인은 순수한 자바 객체로 비즈니스 로직과 맞닿게 합니다. 엔티티는 저장과 읽기 용도로만 사용되고 도메인으로 컨버팅하여 관련 로직을 수행하도록 사용하고 있습니다.</p>
<h3 id="구분하면-좋은-점이-뭔데">구분하면 좋은 점이 뭔데?</h3>
<p>도메인과 엔티티를 구분하면 관심사의 분리가 철저하게 이루어질 수 있습니다.
엔티티 객체에 도메인 내용을 다 넣으면, 한 클래스의 책임이 많아지고 다른 객체와 상호작용 할 때 결합도가 높아질 수 있습니다.</p>
<p>다만, 도메인과 엔터티를 구분하면 코드 복잡성이 증가할 수 있습니다. 단순 crud 작업만 할 때는 서비스 계층이 필요한가? 라는 의문을 가질 수 있습니다. 지금 제 코드가 그렇습니다...
트랜잭션 관리도 어렵습니다. 엔티티 내부에서 처리하면 하나의 로직으로도 끝날 수 있지만, 서비스에서 여러 엔티티를 조회하고 변경하는 과정에서 트랜잭션이 누적되어 성능 문제가 일어날 수 있습니다.(n+1 쿼리 같은...)</p>
<h3 id="느낀-점">느낀 점</h3>
<p>프로젝트를 할 때, 패키지 구조를 보면 domain 내에 controller, service, entity, repository가 있도록 설계됐었는데 이제 이해 됐습니다! 
서비스 클래스를 분리하면 domain 패키지 내에 엔티티 클래스와 서비스 클래스를 함께 위치해야 할 것 같고, 엔티티 클래스에 비즈니스 로직을 넣어도 되는 구현 범위라면 entity 패키지 안에 넣어도 될 것 같습니다.
현재 하고 있는 로또 미션은... service 패키지 분리 이전에 '객체지향적으로' 엔티티 객체 내에서 비즈니스 로직을 수행하도록 리팩토링 하는 방향으로 진행해봐야겠어요!!!!!!!!!!!!!!!!!!!!!!!!!!!</p>
<h4 id="참고-자료">참고 자료</h4>
<p><a href="https://velog.io/@goseungwon/%EB%8F%84%EB%A9%94%EC%9D%B8%EA%B3%BC-%EC%97%94%ED%8B%B0%ED%8B%B0%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90">도메인과 엔티티의 차이점</a></p>
<p><a href="https://mangkyu.tistory.com/192">[Spring] 엔티티(Entity) 또는 도메인 객체(Domain Object)와 DTO를 분리해야 하는 이유
출처: https://mangkyu.tistory.com/192 [MangKyu's Diary:티스토리]</a></p>
<p><a href="https://velog.io/@choi-hyeseong/%EB%8F%84%EB%A9%94%EC%9D%B8%EA%B3%BC-%EC%97%94%ED%8B%B0%ED%8B%B0%EB%8A%94-%EB%AD%94-%EC%B0%A8%EC%9D%B4%EC%9D%BC%EA%B9%8C">도메인과 엔티티는 뭔 차이일까</a></p>